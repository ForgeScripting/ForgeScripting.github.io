<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forge Scripting - Add to cart</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }
        .cart-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
        }
        .remove-btn {
            color: red;
            cursor: pointer;
            float: right;
        }
    </style>
</head>
<body>
    <h1>Your Cart</h1>
    <div id="cart-container"></div>

    <script>
        function getCookie(name) {
            try {
                const value = `; ${document.cookie}`;
                const parts = value.split(`; ${name}=`);
                if (parts.length === 2) {
                    const cookieValue = parts.pop().split(';').shift();
                    return cookieValue ? JSON.parse(decodeURIComponent(cookieValue)) : [];
                }
                return [];
            } catch (e) {
                console.error('Error parsing cookie:', e);
                return [];
            }
        }

        function setCookie(name, value) {
            try {
                const encodedValue = encodeURIComponent(JSON.stringify(value));
                document.cookie = `${name}=${encodedValue}; path=/; max-age=86400`; // 24 hours
            } catch (e) {
                console.error('Error setting cookie:', e);
            }
        }

        function removeFromCart(index) {
            let cart = getCookie('cart');
            if (Array.isArray(cart)) {
                cart.splice(index, 1);
                setCookie('cart', cart);
                displayCart();
            }
        }

        function displayCart() {
            const container = document.getElementById('cart-container');
            const cart = getCookie('cart');
            
            if (!Array.isArray(cart) || cart.length === 0) {
                container.innerHTML = '<p>Your cart is empty</p>';
                return;
            }

            let html = '';
            cart.forEach((item, index) => {
                html += `
                    <div class="cart-item">
                        <span class="remove-btn" onclick="removeFromCart(${index})">‚ùå</span>
                        <h2>Package: ${item.package || 'Not specified'}</h2>
                        <h3>Options:</h3>
                        <ul>
                            ${item.fastDelivery ? '<li>Fast Delivery</li>' : ''}
                            ${item.removeWatermark ? '<li>Remove Watermark</li>' : ''}
                            ${item.customLogo ? '<li>Custom Logo</li>' : ''}
                        </ul>
                        <p>Description: ${item.description || 'No description'}</p>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        window.onload = function() {
            displayCart();
        };
    </script>

    <p><a href="/index.html">Back to Home</a></p>
    <p><a href="/services">Add Another Mod</a></p>
</body>
</html>